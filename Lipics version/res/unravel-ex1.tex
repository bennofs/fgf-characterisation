\begin{tikzpicture}
  \tikzset{element/.style = {inner sep=0.25em, fill=white, solid, rounded corners=0.7em, draw=black}};
  \tikzset{edge from parent/.style = {draw, thick, densely dashed, ->}};

  \begin{scope}[xshift=-14em, yshift=2.5em]
    \draw[tolbrightGreen, line width=0.4em, -{Stealth[round]}] (0,0) -- +(3em, 0) node[anchor=west] { $P$ };
    \draw[tolbrightYellow, line width=0.25em, -{Stealth[round]}] (0,-1.5em) -- +(3em, 0) node[anchor=west] { $E$ };
    \draw[edge from parent] (0,-3em) -- +(3em, 0) node[anchor=west] { $\relNext$ };
  \end{scope}

  \node[element] (p1) {$(\elemtuplep, 1)$}
    [level distance=5em]
    child[grow=220, every child node/.style={anchor=east}] {
      node[element] (p2) {$(\elemtuplep, 2)$} edge from parent [draw=none]
      %
      child[grow=190]  {node[element]              (p12p3) {$(\elemtuplep(1,2)\elemtuplep, 3)$}}
      child[grow=240]  {node[element]              (p22e2) {$(\elemtuplep(2,2)\elemtuplee, 2)$}}
      child[grow=down] {node[element,anchor=north] (p3)    {$(\elemtuplep, 3)$}}
    }
    child[grow=-50, every child node/.style={anchor=west}] {
      node[element] (p11p2) {$(\elemtuplep(1,1)\elemtuplep, 2)$} edge from parent [draw=none]
      %
      child[grow=-100] { node[element, anchor=north] (p11p12p3) {$(\elemtuplep(1,1)\elemtuplep(1,2)\elemtuplep, 3)$} }
      child[grow=-45]  { node[element]               (p11p22e2){$(\elemtuplep(1,1)\elemtuplep(2,2)\elemtuplee, 2)$} }
      child[grow=-10]  { node[element]               (p11p3) {$(\elemtuplep(1,1)\elemtuplep, 3)$} }
    };

    \begin{scope}[text opacity=1, on background layer]
      \begin{scope}[every path/.style={draw}, black, thick, edge from parent]
        \draw (p1.west) to (p2);
        \draw (p1.east) to (p11p2);
      \end{scope}

      \tikzset{green/.style={fill opacity=1, tolbrightGreen}};
      \tikzset{yellow/.style={fill opacity=1, tolbrightYellow}};

      \fill[green] ($(p1.center) + (1em, 1em)$) circle[radius=0.7em] coordinate (p1c1);
      \fill[green] ($(p1.center) + (-1em, 1em)$) circle[radius=0.7em] coordinate (p1c2);
      \fill[green] ($(p1.center) + (-1em, -1em)$) circle[radius=0.7em] coordinate (p1c3);
      \fill[green] ($(p1.center) + (1em, -1em)$) circle[radius=0.7em] coordinate (p1c4);

      \fill[green] ($(p2.center) + (-1em,0.5em)$) circle[radius=0.7em] coordinate (p2c1);
      \fill[green] (p2.east) circle[radius=0.7em] coordinate (p2c2);
      \fill[yellow] ($(p2.center) + (0.5em,-1em)$) circle[radius=0.4em] coordinate (p2c3);
      \fill[yellow] ($(p2.center) + (-0.4em,-0.8em)$) circle[radius=0.4em] coordinate (p2c4);
      \fill[yellow] ($(p2.west) + (0.1em,-0.4em)$) circle[radius=0.4em] coordinate (p2c5);

      \fill[green] ($(p3.center) + (1.3em, 0)$) circle[radius=0.7em] coordinate (p3c1);
      \fill[yellow] ($(p3.center) + (0.6em, 0.8em)$) circle[radius=0.4em] coordinate (p3c2);

      \fill[yellow] ($(p22e2.center) + (2em, 0.8em)$) circle[radius=0.4em] coordinate (p22e2c1);

      \fill[green] ($(p12p3.north) + (1em, 0em)$) circle[radius=0.7em] coordinate (p12p3c1);
      \fill[yellow] ($(p12p3.east) + (0em, -0.5em)$) circle[radius=0.4em] coordinate (p12p3c2);

      \fill[green] ($(p11p2.north) + (0,0)$) circle[radius=0.7em] coordinate (p11p2c1);
      \fill[green] ($(p11p2.west) + (0,0)$) circle[radius=0.7em] coordinate (p11p2c2);
      \fill[yellow] ($(p11p2.east) + (0,0)$) circle[radius=0.4em] coordinate (p11p2c3);
      \fill[yellow] ($(p11p2.center) + (1em,-0.9em)$) circle[radius=0.4em] coordinate (p11p2c4);
      \fill[yellow] ($(p11p2.south) + (-0.9em,-0.1em)$) circle[radius=0.4em] coordinate (p11p2c5);

      \fill[green] ($(p11p3.north) + (0,0)$) circle[radius=0.7em] coordinate (p11p3c1);
      \fill[yellow] ($(p11p3.north west) + (0.2em,-0.2em)$) circle[radius=0.4em] coordinate (p11p3c2);

      \fill[green] ($(p11p12p3.north) + (-2em,0)$) circle[radius=0.7em] coordinate (p11p12p3c1);
      \fill[yellow] ($(p11p12p3.north) + (-0.5em,0)$) circle[radius=0.4em] coordinate (p11p12p3c2);

      \fill[yellow] ($(p11p22e2.north) + (-3.5em,0)$) circle[radius=0.4em] coordinate (p11p22e2c1);

      \begin{scope}[tolbrightGreen, line width=0.4em, relation/.style={
          -{Stealth[round]}, shorten >= 0.4em
        }]
        \draw[relation] (p1c2) to (p2c1) to (p12p3c1);
        \draw[relation] (p1c3) to[out=-130, in=30] (p2c2) to[out=-60, in=60] (p3c1);
        \draw[relation] (p1c1) to (p11p2c1) to[out=20, in=160] (p11p3c1);
        \draw[relation] (p1c4) to (p11p2c2) to (p11p12p3c1);
      \end{scope}

      \begin{scope}[tolbrightYellow, line width=0.25em, relation/.style={
          -{Stealth[round]}, shorten >= 0.2em
        }]
        \draw[relation] (p2c3) to (p3c2);
        \draw[relation] (p2c4) to[out=-135,in=45] (p22e2c1);
        \draw[relation] (p2c5) to (p12p3c2);
        \draw[relation] (p11p2c3) to (p11p3c2);
        \draw[relation] (p11p2c4) to (p11p22e2c1);
        \draw[relation] (p11p2c5) to (p11p12p3c2);
      \end{scope}
    \end{scope}

    \node at (7em, 1em) {\Huge $\unravel{E}$};
\end{tikzpicture}
