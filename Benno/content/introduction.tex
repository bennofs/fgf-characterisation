%!TEX root = ../main.tex
\chapter{Introduction}\label{chap:introduction}

First-order logic ($\FO$)---also known as predicate logic---is undecidable in its full generality\cite[Sec. 1.1]{borger1997}.
For instance, there is no algorithm that for any first-order formula $\varphi$, decides whether it is valid (true in all models) or not.
For practical applications, this leaves two choices: either accept the undecidability and hope that it does not occur in ``real-world problems'' or use another, less expressive logic, limited in some way to become decidable.

One decidable fragment of first-order logic is the \emph{Forward Guarded Fragment}~($\FGF$), recently shown to have nice algorithmic properties\cite{Bednarczyk21}.
The forward guarded fragment derives from the popular \emph{Guarded Fragment} ($\GF$) by restricting the order of variables.
For example, consider the following list of $FO$ formulae:
\begin{enumerate}
  \item $\forall{x_{1}x_{2}x_{3}}\; ((\mathrm{dayAfter}(x_{1},x_{2}) \land \mathrm{dayAfter}(x_{2},x_{3})) \to \mathrm{dayAfter}(x_{1}, x_{3}))$ \\
        ``if $x_{3}$ is a day after $x_{2}$ and $x_{2}$ itself is a day after $x_{1}$, then $x_{3}$ is after $x_{1}$ as well (transitivity)'' \\
        \emph{not guarded}: no atom covers all the variables $x_{1}, x_{2}, x_{3}$
  \item $\forall{x_{1}}\; (\mathrm{sunny}(x_{1}) \to \exists{x_{2}} (\mathrm{dayAfter}(x_{2},x_{1}) \land \neg \mathrm{sunny}(x_{2})))$ \\
        ``for every sunny day, there is a day before which was not sunny'' \\
        \emph{not forward}: $x_{2}, x_{1}$ is in wrong order
  \item $\forall{x_{1}x_{2}x_{3}}\; (\mathrm{dayBetween}(x_{1},x_{2},x_{3}) \to ((\mathrm{monday}(x_{1}) \land \mathrm{friday}(x_{3})) \to \mathrm{workday}(x_{2})))$ \\
        ``days between monday and friday are workdays'' \\
        \emph{forward and guarded}
\end{enumerate}
The forward guarded fragment consists of formulae which are both forward and guarded, like the third formula in the above list.
Here, $\FGF$ we characterize $\FGF$ as a subset of $\FO$ subject to \emph{syntactic} criteria.
With such a definition, we can say for every $\FO$ formula whether it belongs to $\FGF$ or not.
However, what if instead of asking whether a given $\FO$-formula $\varphi$ is in $\FGF$, we ask: is there an equivalent formula in $\FGF$, \ie is the property expressed by $\varphi$ also possible to express in $\FGF$?
This thesis provides an answer to this question in the form of a van Benthem characterization of $\FGF$, as explained below.
The proof presented here applies to both finitary and infinitary versions of this characterization.
While the infinite version was proven before, the finite version is a new result.

Van Benthem's theorem characterizes a logic using the notion of \emph{bisimulation}.
For a simple example of one notion of bisimulation, consider transition systems, which are structures consisting of a set of states with associated properties and a transition relation between the states.
Two transition systems are \emph{bisimilar} if there is a mapping (bisimulation) between states from one system to the other such that if state $a$ maps to state $b$, then:
\begin{enumerate}[(a)]
  \item $a$ and $b$ have the same properties, and
  \item if there is a transition from $a$ to $c$, then there is a corresponding transition to a state $d$ from $b$ and $c$ maps to $d$, and vice versa for a transition from $b$ to some $d$.
\end{enumerate}
This notion of bisimulation defines an equivalence on structures.
It is easy to see that certain kinds of formulae, in particular first-order translations of modal logic formulae, are preserved under this equivalence.
Here, ``preserved'' means that if there are two bisimilar models, the formula must either satisfy both of them or neither.
Now, the classical van Benthem theorem\cite{van1983modal} proves the much harder converse: that any $\FO$-formula which is preserved under this kind of bisimulation is equivalent to a first-order translation of a modal logic formula.

We show that a similar characterization is possible for $\FGF$.
Employing a suitable notion of bisimulation, the $\FGF$ bisimulation $\bisimto_{\FGF}$, we prove that $\FGF$ is exactly the bisimulation invariant fragment of $\FO$.
Our main focus is the finite model setting.
In the finite case, we may only assume invariance under $\bisimto_{\FGF}$-equivalent models that are finite, but we also only need to establish logical equivalence under finite models.
Hence, the van Benthem theorem differs between the finite and the infinite case.
However, the approach that we follow in this thesis works in both settings.
Succinctly, we obtain the following result: $\FGF \simeq \FO/{\bisimto_{\FGF}}$ (``$\FGF$ is exactly the $\bisimto_{\FGF}$-invariant fragment of $\FO$''), both in the finite and the infinite.
This shows that $\bisimto_{\FGF}$ is in fact the right notion of bisimulation for $\FGF$.

\section{Related Work}

The proof technique in this thesis closely follows the approach taken by Otto to prove van Benthem theorems for variations of modal logic\cite{Otto04, otto2004a}.
The central part of this technique is the construction of structures called ``finite companions''.
Like Otto, we construct these companions by stopping the infinite unraveling at some depth and then relinking edges to roots, to preserve similarity with the original structure.
The method of unraveling that we employ is inspired by the construction that Bednarczyk used to show the $\ExpTime$-completeness of $\FGF$\cite{Bednarczyk21}.
Bednarczyk's construction however is not sufficient to construct the finite companions.
Our new method turns out to be similar to a method of unraveling already described by Andr√©ka et al. when introducing the guarded fragment\cite{AndrekaNB98}.
We present a comparision to these two existing methods of unraveling in \cref{sec:other-unravelings}.

In addition to the variations of modal logic mentioned above, there are also other logics which admit a van Benthem characterization.
For this work, the most relevant result here is by Otto again, showing that $\GF$ is the $\bisimto_{\GF}$-invariant fragment of $\FO$\cite{Otto2012}, since our proof for $\FGF$ relies on this result.
In addition, examples of other logics with a van Benthem characterization are:
\begin{itemize}
  \item TODO
\end{itemize}

The logics $\FGF$ and $\GF$ represent one particular approach to generalize basic modal logic.
Other noteworthy approaches include:
\begin{itemize}
  \item one dimensional fragment
  \item separated fragment
  \item unary negation fragment
  \item two variable fragment

\end{itemize}
The main focus of these fragments


- other closely related extensions of modal logic: one dimensional fragment, separated fragment, unary negation fragment, etc

\section{Contributions and Outline}

- overall: prove theorem, the van benthem characterization of FGF
- in the process: introduce a new unraveling (extending Bart's unraveling)
- outline
  - chapter 2: preliminaries (notation and logics)
  - chapter 3: introduction to bisimulations/games
  - chapter 4: introduce van benthem characterisation and proof technique by otto
  - chapter 5: new unraveling for infinite case
  - chapter 6: cut unraveliong to finite case, finishes proof
  - chapter 7: conclusion and future directions
